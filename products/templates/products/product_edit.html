{% extends 'products/base.html' %} {% block content %}
<div class="max-w-2xl mx-auto">
  <div class="mb-8">
    <h2 class="text-2xl font-semibold mb-1">Edit Product</h2>
    <p class="text-sm text-gray-500">Update the product details below</p>
  </div>

  <form method="POST" class="space-y-6">
    {% csrf_token %}

    <!-- Product Name -->
    <div>
      <label
        for="nama_produk"
        class="block text-sm font-medium text-gray-700 mb-2"
      >
        Product Name <span class="text-red-500">*</span>
      </label>
      <input
        type="text"
        name="nama_produk"
        id="nama_produk"
        required
        value="{{ product.nama_produk }}"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none"
        placeholder="Enter product name"
      />
    </div>

    <!-- Price -->
    <div>
      <label for="harga" class="block text-sm font-medium text-gray-700 mb-2">
        Price (Rp) <span class="text-red-500">*</span>
      </label>
      <input
        type="number"
        name="harga"
        id="harga"
        required
        min="0"
        step="1"
        value="{{ product.harga }}"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none"
        placeholder="Enter price"
      />
      <p class="text-xs text-gray-500 mt-1">Enter numbers only</p>
    </div>

    <!-- Category -->
    <div>
      <label
        for="kategori"
        class="block text-sm font-medium text-gray-700 mb-2"
      >
        Category <span class="text-red-500">*</span>
      </label>
      <select
        name="kategori"
        id="kategori"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none"
      >
        <option value="">Select a category</option>
        {% for category in categories %}
        <option value="{{ category }}" {% if category == product.kategori %}selected{% endif %}>
          {{ category }}
        </option>
        {% endfor %}
      </select>
    </div>

    <!-- Status -->
    <div>
      <label for="status" class="block text-sm font-medium text-gray-700 mb-2">
        Status <span class="text-red-500">*</span>
      </label>
      <select
        name="status"
        id="status"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none"
      >
        <option value="">Select status</option>
        {% for status in status_choices %}
        <option value="{{ status }}" {% if status == product.status %}selected{% endif %}>
          {{ status }}
        </option>
        {% endfor %}
      </select>
    </div>

    <!-- Buttons -->
    <div class="flex gap-3 pt-4">
      <button
        type="submit"
        class="flex-1 bg-gray-900 text-white px-6 py-2.5 rounded-lg hover:bg-gray-800 transition-colors"
      >
        Update Product
      </button>
      <a
        href="/"
        class="flex-1 text-center border border-gray-300 px-6 py-2.5 rounded-lg hover:bg-gray-50 transition-colors"
      >
        Cancel
      </a>
    </div>
  </form>
</div>

<script>
  // Client-side validation
  document.querySelector('form').addEventListener('submit', function (e) {
    const nama = document.getElementById('nama_produk').value.trim();
    const harga = document.getElementById('harga').value;

    // Validate product name
    if (!nama) {
      e.preventDefault();
      alert('Product name is required');
      return;
    }

    // Validate price
    if (!harga || isNaN(harga) || parseFloat(harga) < 0) {
      e.preventDefault();
      alert('Please enter a valid price (numbers only)');
      return;
    }
  });
</script>
{% endblock content %}
